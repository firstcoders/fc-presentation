/*! fc-presentation 2016-05-14 Mark Cremer <mark@firstcoders.co.uk> */

"use strict";!function(){angular.module("fc.presentation",["duScroll"]).directive("fcPresentation",["$document","$timeout","$window",function($document,$timeout,$window){return{restrict:"E",transclude:!0,replace:!0,controller:["$scope",function($scope){$scope.slides=[],$scope.activeSlide=0,this.registerSlide=function(slide){$scope.slides.push(slide)},this.isActive=function(slide){return $scope.slides[$scope.activeSlide]===slide}}],link:function($scope){function getScrollTop(){if("undefined"!=typeof $window.pageYOffset)return $window.pageYOffset;var B=$document.body,D=$document.documentElement;return D=D.clientHeight?D:B,D.scrollTop}var body,viewport,timeout;body=$document[0].body,viewport=angular.element($document);var scrollspy=function(){var scrollHeight,scrollTop;scrollHeight=body.scrollHeight,scrollTop=getScrollTop(),timeout&&$timeout.cancel(timeout),timeout=$timeout(function(){angular.forEach($scope.slides,function(slideEl,index){slideEl[0].getBoundingClientRect().top<=0&&slideEl[0].getBoundingClientRect().bottom>=0&&($scope.activeSlide=index)})},10)};viewport.bind("wheel",scrollspy),scrollspy();var move=function(){$scope.slideTo($scope.activeSlide)};$scope.slideTo=function(i){$document.scrollToElement($scope.slides[i],0,500),$scope.activeSlide=i},$scope.hasNext=function(){return $scope.activeSlide<$scope.slides.length-1},$scope.hasPrevious=function(){return $scope.activeSlide>0},$scope.prev=function(){$scope.hasPrevious()&&$scope.activeSlide--,move()},$scope.next=function(){$scope.hasNext()&&$scope.activeSlide++,move()}},template:'<div class="fc-presentation fc-presentation-slide-active-{{activeSlide}}"><div ng-transclude class="fc-presentation-content"></div></div>'}}]).directive("fcPresentationSlide",function(){return{restrict:"E",require:"^fcPresentation",transclude:!0,replace:!0,scope:!0,link:function($scope,element,attr,parent){parent.registerSlide(element),$scope.isActive=function(){return parent.isActive(element)}},template:'<div class="presentation-slide" ng-class="{active:isActive()}" ng-transclude></div>'}}).directive("fcPresentationControls",function(){return{restrict:"E",require:"^fcPresentation",transclude:!0,replace:!0,template:'<div class="fc-presentation-controls" ng-transclude></div>'}})}();
//# sourceMappingURL=fc-presentation.min.js.map