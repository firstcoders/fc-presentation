/*! fc-presentation 2016-06-25 Mark Cremer <mark@firstcoders.co.uk> */

"use strict";!function(){angular.module("fc-presentation",["duScroll"]).directive("fcPresentation",["$document","$timeout","$window",function($document,$timeout,$window){return{restrict:"E",transclude:!0,replace:!0,controller:["$scope",function($scope){$scope.slides=[],$scope.activeSlide=0,this.registerSlide=function(slide){$scope.slides.push(slide)},this.isActive=function(slide){return $scope.slides[$scope.activeSlide]===slide};var move=function(){$scope.slideTo($scope.activeSlide)};$scope.slideTo=function(i){$document.scrollToElement($scope.slides[i],0,500),$scope.activeSlide=i},$scope.hasNext=function(){return $scope.activeSlide<$scope.slides.length-1},$scope.hasPrevious=function(){return $scope.activeSlide>0},$scope.prev=function(){$scope.hasPrevious()&&$scope.activeSlide--,move()},$scope.next=function(){$scope.hasNext()&&$scope.activeSlide++,move()}}],link:function($scope,elem,attr){function isSlideVisible(el){var rect=el[0].getBoundingClientRect();return rect.top<=top&&rect.bottom>=0}var body,$win,isChecking,top;body=$document[0].body,$win=angular.element($window),top=parseInt(attr.fcPresentationTop)||0;var handleScroll=function(){isChecking||(isChecking=!0,$timeout(function(){angular.forEach($scope.slides,function(slideEl,index){isSlideVisible(slideEl)&&($scope.activeSlide=index)}),isChecking=!1},100))};$win.on("scroll",handleScroll),$scope.$on("$destroy",function(){$win.off("scroll",handleScroll)}),handleScroll()},template:'<div class="fc-presentation fc-presentation-slide-active-{{activeSlide}}"><div ng-transclude class="fc-presentation-content"></div></div>'}}]).directive("fcPresentationSlide",function(){return{restrict:"E",require:"^fcPresentation",transclude:!0,replace:!0,scope:!0,link:function($scope,element,attr,parent){parent.registerSlide(element),$scope.isActive=function(){return parent.isActive(element)}},template:'<div class="fc-presentation-slide" ng-class="{active:isActive()}" ng-transclude></div>'}}).directive("fcPresentationControls",function(){return{restrict:"E",require:"^fcPresentation",transclude:!0,replace:!0,template:'<div class="fc-presentation-controls" ng-transclude></div>'}})}();
//# sourceMappingURL=fc-presentation.min.js.map